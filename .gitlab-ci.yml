include:
 - local: "ci-variables.yml"
 - local: ".gitlab-ci-templates.yml"

build:debian-buster:
  extends: .build
  image: ${DOCKER_REGISTRY}/hs-conan-debian-buster-slim:latest

test:debian-buster:
  extends: .test
  image: ${DOCKER_REGISTRY}/hs-conan-debian-buster-slim:latest
  needs: ["build:debian-buster"]

analyze_memory_usage:debian-buster:
  extends: .analyze_memory_usage
  image: ${DOCKER_REGISTRY}/hs-conan-debian-buster-slim:latest
  needs: ["build:debian-buster"]

check_code_coverage:
  extends: .check_code_coverage
  image: ${DOCKER_REGISTRY}/hs-conan-debian-buster-slim:latest
  needs: ["build:debian-buster", "test:debian-buster"]

format:
  extends: .format
  image: ${DOCKER_REGISTRY}/hs-conan-debian-bullseye-slim:latest
  needs: ["build:debian-bullseye"]

lint:
  extends: .lint
  image: ${DOCKER_REGISTRY}/hs-conan-debian-bullseye-slim:latest
  needs: ["build:debian-bullseye"]

document:
  extends: .document
  image: ${DOCKER_REGISTRY}/hs-conan-debian-buster-slim:latest

package:debian-buster:
  extends: .package
  image: ${DOCKER_REGISTRY}/hs-conan-debian-buster-slim:latest

pages:
  extends: .pages
  image: ${DOCKER_REGISTRY}/hs-conan-debian-buster-slim:latest
  needs: ["check_code_coverage", "document"]
